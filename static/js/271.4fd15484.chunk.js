"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[271],{4271:function(e,r,n){n.r(r),n.d(r,{ChatPage:function(){return f},default:function(){return g}});var s=n(9439),t=n(2791),i=n(1983),u=n(2962),a="ChatPage_userInfo__UU9zy",c=n(364),o=n(2047),l=n(6641),h=n(7689),d=n(184),f=function(){return(0,d.jsx)("div",{children:(0,d.jsx)(x,{})})},x=function(){var e=(0,c.I0)(),r=(0,c.v9)((function(e){return e.chat.status})),n=(0,c.v9)((function(e){return e.auth.isAuth}));return(0,t.useEffect)((function(){return e((0,o.WE)()),function(){e((0,o.R7)())}}),[]),n?(0,d.jsx)("div",{children:"error"===r?(0,d.jsx)("div",{children:"Some error"}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(v,{}),(0,d.jsx)(j,{})]})}):(0,d.jsx)(h.Fg,{to:"/login"})},v=function(){var e=(0,t.useRef)(null),r=(0,c.v9)((function(e){return e.chat.messages})),n=(0,t.useState)(!0),i=(0,s.Z)(n,2),u=i[0],a=i[1];return(0,t.useEffect)((function(){var r;u&&(null===(r=e.current)||void 0===r||r.scrollIntoView({behavior:"smooth"}))}),[r]),(0,d.jsxs)("div",{style:{height:"600px",overflow:"auto"},onScroll:function(e){var r=e.currentTarget;Math.abs(r.scrollHeight-r.scrollTop-r.clientHeight)<300?a(!0):a(!1)},children:[!!r&&r.map((function(e){return(0,d.jsx)(m,{message:e},e.id)})),(0,d.jsx)("div",{ref:e})]})},j=function(){var e=(0,c.v9)((function(e){return e.chat.status})),r=(0,c.I0)(),n=(0,t.useState)(""),u=(0,s.Z)(n,2),a=u[0],h=u[1];return(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{children:(0,d.jsx)(l.Z,{size:"small",placeholder:"Message",style:{marginTop:"10px",maxWidth:"400px"},onChange:function(e){return h(e.currentTarget.value)},value:a})}),(0,d.jsx)("div",{style:{marginTop:"10px"},children:(0,d.jsx)(i.ZP,{type:"primary",disabled:"ready"!==e,onClick:function(){a&&(r((0,o.bG)(a)),h(""))},children:"Send"})})]})},m=(0,t.memo)((function(e){var r=e.message;return(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:a,children:[(0,d.jsx)(u.C,{src:r.photo}),(0,d.jsxs)("span",{children:["UserID: ",r.userId]}),(0,d.jsxs)("span",{children:["UserName: ",r.userName]})]}),(0,d.jsx)("p",{children:r.message}),(0,d.jsx)("hr",{})]})})),g=f}}]);
//# sourceMappingURL=271.4fd15484.chunk.js.map